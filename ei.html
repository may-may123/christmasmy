<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Merry Christmas</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <!-- Background Audio (Auto-play on page load) -->
    <audio id="christmasMusic" loop>
      <source src="christmas-music.mp3/1220 (1).mp3" type="audio/mpeg" />
    </audio>
    <div class="overlay">
 <div class="main-card">
        <img src="p/trk.jpg" class="main-photo" alt="Christmas Photo" />
        <h1>Merry Christmas üéÑ</h1>
        <p>TR DAW KHINE EI ZIN</p>
        <a href="about.html">
          <button onclick="openGift()">üéÅ Christmas Gift</button>
        </a>
      </div>
    </div>

    <!-- Gift Video Modal -->
    <div id="giftModal">
      <span onclick="closeGift()">‚úñ</span>
      <video id="giftVideo" controls>
        <!-- <source src="gift-video.mp4" type="video/mp4" /> -->
      </video>
    </div>

    <script src="script.js"></script>

    <script>
      // Mobile optimized music player
      window.addEventListener("DOMContentLoaded", (event) => {
        const music = document.getElementById("christmasMusic");
        const body = document.body;

        // Create music control button
        const musicButton = document.createElement("button");
        musicButton.className = "music-control";
        musicButton.innerHTML = "üéµ Play Music";
        musicButton.id = "musicToggle";

        body.appendChild(musicButton);

        // Mobile touch start event to enable audio
        document.addEventListener(
          "touchstart",
          function initAudio() {
            // Try to play on first touch
            if (music.paused) {
              music
                .play()
                .then(() => {
                  musicButton.innerHTML = "üéµ Music Playing";
                  musicButton.style.background = "#2e7d32";
                })
                .catch((e) => {
                  console.log("Audio play failed:", e);
                  musicButton.innerHTML = "‚ñ∂ Tap to Play Music";
                });
            }

            // Remove this listener after first touch
            document.removeEventListener("touchstart", initAudio);
          },
          { once: true }
        );

        // Music button click handler
        musicButton.addEventListener("click", function () {
          if (music.paused) {
            music.play();
            musicButton.innerHTML = "üéµ Music Playing";
            musicButton.style.background = "#2e7d32";
          } else {
            music.pause();
            musicButton.innerHTML = "‚ñ∂ Play Music";
            musicButton.style.background = "#c1121f";
          }
        });

        // Auto-play attempt (may not work on all mobile browsers)
        setTimeout(() => {
          if (music.paused) {
            music
              .play()
              .then(() => {
                musicButton.innerHTML = "üéµ Music Playing";
                musicButton.style.background = "#2e7d32";
              })
              .catch((e) => {
                // Auto-play failed, show play button
                console.log("Auto-play prevented");
              });
          }
        }, 1000);

        // Handle page visibility change
        document.addEventListener("visibilitychange", function () {
          if (document.hidden) {
            music.pause();
          } else if (!music.paused) {
            music.play().catch((e) => console.log("Resume play failed"));
          }
        });
      });

      // Gift modal functions
      function openGift() {
        const modal = document.getElementById("giftModal");
        const video = document.getElementById("giftVideo");
        const music = document.getElementById("christmasMusic");

        // Pause music when opening gift
        if (!music.paused) {
          music.pause();
          document.getElementById("musicToggle").innerHTML = "‚ñ∂ Play Music";
          document.getElementById("musicToggle").style.background = "#c1121f";
        }

        modal.style.display = "flex";
        video.play();
      }

      function closeGift() {
        const modal = document.getElementById("giftModal");
        const video = document.getElementById("giftVideo");

        video.pause();
        video.currentTime = 0;
        modal.style.display = "none";
      }
    </script>
  </body>
</html>